---

- name: Uninstalling docker engine
  ansible.builtin.apt:
    name:
      - docker-ce
      - docker-ce-cli
      - containerd.io
    state: absent

- name: Removing configuration file
  ansible.builtin.file:
    path: "{{ configuration_folder_path }}"
    state: absent

- name: Removing docker apt repository from configuration files
  ansible.builtin.apt_repository:
    repo: 'deb [arch=amd64] https://download.docker.com/linux/{{ distribution }} {{ distribution_release }} stable'
    state: absent

- name: Shutting down service
  ansible.builtin.systemd:
    name: docker
    state: stopped
